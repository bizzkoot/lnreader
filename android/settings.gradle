pluginManagement { includeBuild("../node_modules/@react-native/gradle-plugin") }
plugins { id("com.facebook.react.settings") }

extensions.configure(com.facebook.react.ReactSettingsExtension){ ex -> ex.autolinkLibrariesFromCommand() }
rootProject.name = 'LNReader'

include ':app'
includeBuild('../node_modules/@react-native/gradle-plugin')

// Configuration-cache compatible Expo path resolution
// Note: exec runs at configuration time because apply from: requires immediate evaluation
def expoScriptPath = providers.exec {
    workingDir(rootDir)
    commandLine("node", "--print", "require.resolve('expo/package.json')")
}.standardOutput.asText.map { path ->
    file(path.trim()).parent + "/scripts/autolinking.gradle"
}

// Apply the Expo autolinking script
apply from: expoScriptPath.get()
useExpoModules()
